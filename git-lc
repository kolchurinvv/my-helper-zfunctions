print_usage(){
  echo 'Usage:  git-lc [-flags] "commit message"\n' 2>&1
  echo '  git-lc - add all files and commit locally with a meassage\n'
  echo '  "commit message" - required, the message assigned to the commit'
  echo '\n [-flags]:'
  echo '   -h   prints out this message'
}
# TODO #6 add the ability to just `git commit`, aka for the editor to open a commit dialog instad of using the `-m` flag
# TODO ability to commint only already staged files
isFlagged='false'
onlyStaged='false'

while getopts ':hs' flag; do
  case "${flag}" in
    h)
      print_usage
      return 0
      ;;
    s)
      isFlagged = 'true'
      onlyStaged = 'true'
      ;;
    ?)
      printf "Invalid option: -${OPTARG}.\n\n" >&2
      print_usage
      return 1
      ;;
  esac
done

if [[ $isFlagged == 'true' ]]; then
  shift
fi

if [[ $onyStaged == 'false' ]]; then
  git add . -v
fi

if [[ ${#} -lt 1 ]]; then
  echo 'Must have commit message\n\n'
  print_usage
  return 1
fi

git commit -m "${1}"
